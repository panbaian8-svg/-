# 🚀 StudyFlow AI 开发 Agent - 自动模式指令

**生成时间：** 2026-03-02 06:15
**模式：** 自动执行模式（v2.0）
**参考设计：** 桌面"前端3.4"项目

---

## ⚠️ 重要说明

你现在处于**自动执行模式**，除了以下情况外，所有任务都**自动执行**，不需要询问用户。

---

## 🛑 必须询问用户的情况（停止自动执行）

遇到以下情况时，**必须停止并询问用户**：

### 1. 🔴 设计与架构决策
- 需要选择技术方案（用哪个库/框架）
- 需要修改核心架构设计
- 需要重构现有代码结构

### 2. 🔴 重大功能增删
- 需要新增不在计划中的功能
- 需要删除已计划的 P0 功能
- 需要大幅修改任务优先级

### 3. 🔴 安全与权限问题
- 涉及 API Key、密码等敏感信息
- 涉及文件系统权限问题
- 涉及数据删除操作

### 4. 🔴 资源耗尽风险
- API 额度不足且无法切换
- 磁盘空间不足
- 内存不足导致程序崩溃

### 5. 🔴 计划冲突
- 发现与之前计划的重大矛盾
- 发现任务无法按时完成

---

## ✅ 可以自动执行的情况

以下情况**自动执行**，不需要询问：

### 1. 💻 代码实现
- 按照计划编写代码
- 修复发现的 bug
- 优化现有代码

### 2. 🧪 测试与验证
- 使用 MCP 工具进行自动化测试
- 修复测试失败的问题
- 重新测试直到通过

### 3. 🔄 正常调试
- API 调用失败（尝试修复参数/重试）
- 代码语法错误（修复语法）
- 逻辑错误（根据错误信息修复）

### 4. 📝 文档与提交
- 添加代码注释
- 生成任务完成存档
- Git 提交和推送
- 更新任务状态

### 5. 🔧 小问题修复
- 导入缺失 → 添加导入
- 路径错误 → 修正路径
- 配置问题 → 调整配置
- 简单的参数调整

### 6. 📊 进度管理
- 创建任务列表
- 更新任务状态
- 生成进度报告

---

## 🎯 自动执行原则

### 原则 1：优先实现功能
- 不要过度设计
- 不要纠结代码风格
- 先跑通，再优化

### 原则 2：快速修复问题
- 遇到错误立即修复
- 不要等待询问
- 尝试多种修复方案

### 原则 3：保持简单
- 使用最简单的方案
- 避免引入新依赖
- 复用现有代码

### 原则 4：持续测试
- 每次修改后立即测试
- 测试失败立即修复
- 修复后再测试

---

## 🚫 不需要询问的示例

| 情况 | 操作 |
|------|------|
| 导入缺失 `from fastapi import APIRouter` | 添加导入 |
| 函数参数顺序错误 | 修正参数 |
| API 调用超时 | 调整 timeout 或重试 |
| 文件路径错误 | 修正路径 |
| 端口被占用 | 切换端口 |
| 缺少依赖 | 安装依赖 |
| 代码格式问题 | 格式化代码 |
| 简单的逻辑 bug | 修复逻辑 |
| 测试失败 | 分析日志并修复 |
| Git 提交 | 正常提交和推送 |

---

## 🛑 需要询问的示例

| 情况 | 操作 |
|------|------|
| 需要选择 React vs Vue | 🔴 停止，询问用户 |
| 需要删除知识地图功能 | 🔴 停止，询问用户 |
| 需要使用新的 AI 服务 | 🔴 停止，询问用户 |
| 发现 API Key 泄露风险 | 🔴 停止，询问用户 |
| 计划中的任务无法在 30 分钟完成 | 🔴 停止，询问用户 |
| 需要大幅重构现有代码 | 🔴 停止，询问用户 |

---

## 📋 执行流程

### 开始任务时
1. 读取 `DEVELOPMENT_AGENT_INSTRUCTIONS.md`
2. 查看当前任务是否属于必须询问的情况
3. 如果不是，直接开始执行

### 执行任务时
1. 按照要求实现功能
2. 遇到错误时自动修复（3 次尝试）
3. 每次修改后立即测试
4. 生成任务完成存档

### 完成任务时
1. 更新任务状态为 `completed`
2. 开始下一个任务

---

## 🔄 3 次尝试规则

遇到错误时，自动尝试以下修复方式：

**尝试 1：** 分析错误信息，直接修复
**尝试 2：** 查找相关文档，调整方案
**尝试 3：** 尝试替代实现方式

如果 3 次尝试都失败，**停止并询问用户**

---

## 📊 报告格式

### 成功时（自动）
```markdown
✅ 任务完成
- 任务: [任务名]
- 用时: [时间]
- 下一步: [下一个任务]
```

### 失败 3 次后（询问）
```markdown
❌ 任务遇到问题
- 任务: [任务名]
- 错误: [错误信息]
- 尝试过的方案: [列出]
- 需要用户决策
```

---

## ⏰ 时间提醒

| 时间节点 | 提醒内容 |
|---------|---------|
| 04:00 | "阶段 1 完成，继续阶段 2" |
| 05:00 | "阶段 2 完成，继续阶段 3" |
| 06:00 | "休息时间 30 分钟" |
| 08:30 | "剩余 30 分钟，注意时间" |
| 08:50 | "最后 10 分钟，开始准备提交" |

---

## ✅ 确认自动模式

请回复以下内容以确认：

```
✅ 已进入自动执行模式
- 所有非重大问题自动执行
- 重大问题会停止并询问
- 按照时间计划推进
```

---

**模式启用时间：** 2026-03-02 03:05
**最后更新：** 2026-03-02 03:05

---

> 🚀 **自动模式已启用**，开始执行 `DEVELOPMENT_AGENT_INSTRUCTIONS.md` 中的任务！
